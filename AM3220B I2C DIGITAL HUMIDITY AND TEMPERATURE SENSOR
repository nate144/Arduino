//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
// PROGRAM:
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
// AM3220B I2C DIGITAL HUMIDITY AND TEMPERATURE SENSOR
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////


//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
// CREDITS:
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
// INSTRUCTABLE BY: STAN KARAVELIKOV
// EDITED BY: NATE GROSS, DECEMBER 2018
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////


//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
// DESCRIPTION:
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
// DHT AM3220B TEMPERATURE AND HUMIDITY SENSOR BASE CODE WITH SERIAL DATA OUTPUT
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////


//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
// SOURCES:
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
// https://www.instructables.com/id/Connecting-AM2320-With-Arduino/
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////


//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
// PINOUT:
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
// VCC = 5VDC = RED     'PINOUT FOR ARDUINO MEGA2560
// SDA = D20 = YELLOW   'PINOUT FOR ARDUINO MEGA2560
// GND = GND = BLACK    'PINOUT FOR ARDUINO MEGA2560
// SCL = D21 = WHITE    'PINOUT FOR ARDUINO MEGA2560
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////


//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
// LIBRARIES:
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
#include <Wire.h>
#include <AM2320.h>
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////


//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
// CONSTANTS:
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////


//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
// VARIABLES:
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
AM2320 th;
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////


//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
// PROGRAM SETUP:
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
void setup() {
  Serial.begin(9600);
}
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////


//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
// MAIN PROGRAM:
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
void loop() {
  switch(th.Read()) {
    case 2:
      Serial.println("CRC failed");
      break;
    case 1:
      Serial.println("Sensor offline");
      break;
    case 0:
      Serial.print("humidity: ");
      Serial.print(th.h);
      Serial.print("%, temperature: ");
      Serial.print(th.t);
      Serial.println("*C");
      break;
  }

  delay(200);
}
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////


//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
// SUBROUTINE:
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//void subNAME() {
  // PROGRAM CODE GOES HERE
//}
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
